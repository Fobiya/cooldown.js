(function(e){var h={tickFrequency:100,arcWidth:10,arcColor:"#27ae60",arcBackgroundColor:"#d7d8d9",toFixed:1,introDuration:500,completeFn:null};e.fn.cooldown=function(f){if(1<this.length){for(var g=[],d=0;d<this.length;d++)g.push(this.eq(d).cooldown(f));return g}var a=this;e.extend(this,{_init:function(){this.sideLength=Math.min(this.width(),this.height());return this},_tick:function(){this.remainingTime=this.duration-(new Date-this.timePing)/1E3;0>=this.remainingTime&&(this.state="stopped",clearInterval(this.interval),
this.remainingTime=0,this.completeFn&&this.completeFn());this.remainingTimeElement.html(this.remainingTime.toFixed(this.toFixed));return this},_setActive:function(b){b?(this.interval=setInterval(function(){a._tick.apply(a)},this.tickFrequency),this.svgElement&&this.svgElement.unpauseAnimations()):(clearInterval(this.interval),this.svgElement&&this.svgElement.pauseAnimations());return this},start:function(b){this.stop();this.duration=this.remainingTime=b;if(!("number"===typeof this.duration&&0<=this.duration))throw new SyntaxError("Invalid [duration]");
b=this.sideLength/2-this.arcWidth/2;b=["M",this.sideLength/2,this.arcWidth/2,"a",b,b,0,1,0,0.01,0].join(" ");var c=Math.ceil(Math.PI*(this.sideLength-this.arcWidth));this.css("position","relative").html(["<svg style='position: absolute; top: 0; left: 0;'width='",this.sideLength,"' height='",this.sideLength,"'><path fill='none' stroke-dashoffset='",c,"' stroke-dasharray='",c,"' stroke='",this.arcBackgroundColor,"' stroke-width='",this.arcWidth,"' d='",b,"'><animate attributeName='stroke-dashoffset' from='",
-c,"' to='0' dur='",this.introDuration/1E3,"' /><animate attributeName='stroke-dashoffset' from='0' to='",c,"' begin='",this.introDuration/1E3,"' dur='",this.duration,"' /></path><path fill='none' stroke-opacity='0' stroke-dasharray='",c,"' stroke='",this.arcColor,"' stroke-width='",this.arcWidth,"' d='",b,"'><animate attributeName='stroke-dashoffset' from='",-c,"' to='0' begin='",this.introDuration/1E3,"' dur='",this.duration,"' /><animate attributeName='stroke-opacity' from='1' to='1' begin='",
this.introDuration/1E3,"' dur='indefinite' /></path></svg><div class='remaining-time' style='width: 100%; height: 100%; margin: 0; padding: 0; text-align: center; font-size: 16px;line-height: ",this.sideLength,"px;'></div>"].join(""));this.svgElement=this.find("svg")[0];this.remainingTimeElement=this.find(".remaining-time");setTimeout(function(){a.state="paused";a.remainingTimeElement.html(a.duration.toFixed(a.toFixed));a.resume.apply(a)},this.introDuration)},stop:function(){this.state="stopped";
this._setActive(!1).empty()},pause:function(){"playing"===this.state&&(this.state="paused",this._setActive(!1)._tick(),this.duration=this.remainingTime)},resume:function(){"paused"===this.state&&(this.state="playing",this.timePing=new Date,this._setActive(!0))}},h,f);this._init();return{start:function(){return a.start.apply(a,arguments)},stop:function(){return a.stop.apply(a)},pause:function(){return a.pause.apply(a)},resume:function(){return a.resume.apply(a)}}}})(jQuery);
